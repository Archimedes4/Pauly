{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Link } from 'react-router-native';\nimport callMsGraph from \"../../Functions/microsoftAssets\";\nimport { accessTokenContent } from \"../../../App\";\nimport { siteID } from \"../../PaulyConfig\";\nimport { useFonts } from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport { useMsal } from '@azure/msal-react';\nimport { useSelector } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CommissionMode = function (CommissionMode) {\n  CommissionMode[CommissionMode[\"Before\"] = 0] = \"Before\";\n  CommissionMode[CommissionMode[\"Current\"] = 1] = \"Current\";\n  CommissionMode[CommissionMode[\"Upcoming\"] = 2] = \"Upcoming\";\n  return CommissionMode;\n}(CommissionMode || {});\nexport default function Commissions() {\n  var microsoftAccessToken = useContext(accessTokenContent);\n  var _useMsal = useMsal(),\n    instance = _useMsal.instance,\n    accounts = _useMsal.accounts;\n  var _useSelector = useSelector(function (state) {\n      return state.paulyList;\n    }),\n    commissionListId = _useSelector.commissionListId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentCommissions = _useState2[0],\n    setCurrentCommissions = _useState2[1];\n  function getCommissions() {\n    return _getCommissions.apply(this, arguments);\n  }\n  function _getCommissions() {\n    _getCommissions = _asyncToGenerator(function* () {\n      var result = yield callMsGraph(microsoftAccessToken.accessToken, \"https://graph.microsoft.com/v1.0/sites/\" + siteID + \"/lists/\" + commissionListId + \"/items?expand=fields\", instance, accounts);\n      if (result.ok) {\n        var data = yield result.json();\n        console.log(data);\n        if (data[\"value\"] !== null && data[\"value\"] !== undefined) {\n          var resultCommissions = [];\n          for (var index = 0; index < data[\"value\"].length; index++) {\n            resultCommissions.push({\n              title: data[\"value\"][index][\"fields\"][\"Title\"],\n              startDate: new Date(data[\"value\"][index][\"fields\"][\"StartDate\"]),\n              endDate: new Date(data[\"value\"][index][\"fields\"][\"EndDate\"]),\n              points: data[\"value\"][index][\"fields\"][\"Points\"],\n              proximity: data[\"value\"][index][\"fields\"][\"Proximity\"],\n              commissionId: data[\"value\"][index][\"fields\"][\"CommissionID\"],\n              hidden: data[\"value\"][index][\"fields\"][\"Hidden\"]\n            });\n          }\n          setCurrentCommissions(resultCommissions);\n        }\n      }\n    });\n    return _getCommissions.apply(this, arguments);\n  }\n  useEffect(function () {\n    getCommissions();\n  }, []);\n  var _useFonts = useFonts({\n      'BukhariScript': require(\"../../../assets/fonts/BukhariScript.ttf\")\n    }),\n    _useFonts2 = _slicedToArray(_useFonts, 1),\n    fontsLoaded = _useFonts2[0];\n  var onLayoutRootView = useCallback(_asyncToGenerator(function* () {\n    if (fontsLoaded) {\n      yield SplashScreen.hideAsync();\n    }\n  }), [fontsLoaded]);\n  if (!fontsLoaded) {\n    return null;\n  }\n  return _jsxs(View, {\n    children: [dimensions.window.width > 576 ? _jsx(Link, {\n      to: \"/profile/\",\n      children: _jsx(Text, {\n        children: \"Back\"\n      })\n    }) : null, _jsx(Text, {\n      children: \"Commissions\"\n    }), currentCommissions.map(function (item) {\n      return _jsx(Link, {\n        to: \"/commissions/\" + item.commissionId,\n        children: _jsx(View, {\n          children: _jsx(Text, {\n            children: item.title\n          })\n        }, item.commissionId)\n      });\n    })]\n  });\n}","map":{"version":3,"names":["React","useCallback","useContext","useEffect","useState","Text","View","Link","callMsGraph","accessTokenContent","siteID","useFonts","SplashScreen","useMsal","useSelector","jsx","_jsx","jsxs","_jsxs","CommissionMode","Commissions","microsoftAccessToken","_useMsal","instance","accounts","_useSelector","state","paulyList","commissionListId","_useState","_useState2","_slicedToArray","currentCommissions","setCurrentCommissions","getCommissions","_getCommissions","apply","arguments","_asyncToGenerator","result","accessToken","ok","data","json","console","log","undefined","resultCommissions","index","length","push","title","startDate","Date","endDate","points","proximity","commissionId","hidden","_useFonts","require","_useFonts2","fontsLoaded","onLayoutRootView","hideAsync","children","dimensions","window","width","to","map","item"],"sources":["/Users/andrewmainella/Desktop/Pauly/src/AuthenticatedView/Commissions/Commissions.tsx"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { Dimensions, Text, View } from 'react-native'\nimport { Link } from 'react-router-native';\nimport callMsGraph from '../../Functions/microsoftAssets';\nimport { accessTokenContent } from '../../../App';\nimport { siteID } from '../../PaulyConfig';\nimport { useFonts } from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport { useMsal } from '@azure/msal-react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../Redux/store';\n\nenum CommissionMode{\n  Before,\n  Current,\n  Upcoming\n}\n\nexport default function Commissions() {\n  const microsoftAccessToken = useContext(accessTokenContent);\n  const { instance, accounts } = useMsal();\n  const {commissionListId} = useSelector((state: RootState) => state.paulyList)\n  const [currentCommissions, setCurrentCommissions] = useState<commissionType[]>([])\n\n  async function getCommissions(){\n    const result = await callMsGraph(microsoftAccessToken.accessToken, \"https://graph.microsoft.com/v1.0/sites/\" + siteID + \"/lists/\" + commissionListId +\"/items?expand=fields\", instance, accounts)//TO DO list id\n    if (result.ok) {\n      const data = await result.json()\n      console.log(data)\n      if (data[\"value\"] !== null && data[\"value\"] !== undefined){\n        var resultCommissions: commissionType[] = []\n        for (let index = 0; index < data[\"value\"].length; index++) {\n          resultCommissions.push({\n            title: data[\"value\"][index][\"fields\"][\"Title\"],\n            startDate: new Date(data[\"value\"][index][\"fields\"][\"StartDate\"]),\n            endDate:  new Date(data[\"value\"][index][\"fields\"][\"EndDate\"]),\n            points:  data[\"value\"][index][\"fields\"][\"Points\"] as number,\n            proximity: data[\"value\"][index][\"fields\"][\"Proximity\"] as number,\n            commissionId: data[\"value\"][index][\"fields\"][\"CommissionID\"] as string,\n            hidden: data[\"value\"][index][\"fields\"][\"Hidden\"]\n          })\n        }\n        setCurrentCommissions(resultCommissions)\n      }\n    }\n  }\n  useEffect(() => {\n    getCommissions()\n  }, [])\n\n  const [fontsLoaded] = useFonts({\n    'BukhariScript': require('../../../assets/fonts/BukhariScript.ttf'),\n  });\n\n  const onLayoutRootView = useCallback(async () => {\n    if (fontsLoaded) {\n      await SplashScreen.hideAsync();\n    }\n  }, [fontsLoaded]);\n\n  if (!fontsLoaded) {\n    return null;\n  }\n  \n  return (\n    <View>\n      { (dimensions.window.width > 576) ?\n        <Link to=\"/profile/\">\n          <Text>Back</Text>\n        </Link>:null\n      }\n      <Text>Commissions</Text>\n      { currentCommissions.map((item: commissionType) => (\n        <Link to={\"/commissions/\" + item.commissionId}>\n          <View key={item.commissionId}>\n            <Text>{item.title}</Text>\n          </View>\n        </Link>\n      ))}\n    </View>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}